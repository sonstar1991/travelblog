{"ast":null,"code":"var _jsxFileName = \"/Users/huirenchuah/Desktop/travelblog/frontend/pages/blogs/[slug].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../../components/Layout\";\nimport Link from \"next/link\";\nimport Head from \"next/head\";\nimport { useState, useEffect } from \"react\";\nimport { singleBlog, listRelated } from \"../../actions/blog\";\nimport { API, DOMAIN, APP_NAME } from \"../../config\";\nimport moment from \"moment\";\nimport renderHTML from \"react-render-html\";\nimport SmallBlogCard from '../../components/blog/SmallBlogCard';\nimport Search from \"../../components/blog/Search\";\nimport DisqusThread from '../../components/DisqusThread';\nimport ReactImageFallback from 'react-image-fallback';\n\nconst SingleBlog = ({\n  blog,\n  query\n}) => {\n  const {\n    0: related,\n    1: setRelated\n  } = useState([]);\n\n  const loadRelated = () => {\n    listRelated({\n      blog\n    }).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setRelated(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadRelated();\n  }, []);\n\n  const head = () => __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, __jsx(\"title\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, blog.title, \" | \", APP_NAME), __jsx(\"meta\", {\n    name: \"description\",\n    content: blog.mdesc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }), __jsx(\"link\", {\n    rel: \"canonical\",\n    href: `${DOMAIN}/blogs/${query.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: `${blog.title}| ${APP_NAME}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:description\",\n    content: blog.mdesc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:type\",\n    content: \"webiste\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: `${DOMAIN}/blogs/${query.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:site_name\",\n    content: `${APP_NAME}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:image\",\n    content: `${API}/blog/photo/${blog.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    property: \"og:image:secure_url\",\n    ccontent: `${API}/blog/photo/${blog.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }));\n\n  const showBlogCategories = blog => blog.categories.map((c, i) => __jsx(Link, {\n    key: i,\n    href: `/categories/${c.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"btn btn-primary mr-1 ml-1 mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, c.name)));\n\n  const showBlogTags = blog => blog.tags.map((t, i) => __jsx(Link, {\n    key: i,\n    href: `/tags/${t.slug}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"btn btn-outline-primary mr-1 ml-1 mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, t.name)));\n\n  const showRelatedBlog = () => {\n    return related.map((blog, i) => __jsx(\"div\", {\n      className: \"col-md-4\",\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, __jsx(\"article\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, __jsx(SmallBlogCard, {\n      blog: blog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }))));\n  };\n\n  const showComments = () => {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, __jsx(DisqusThread, {\n      id: blog.id,\n      title: blog.title,\n      path: `/blog/${blog.slug}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }));\n  };\n\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, head(), __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"main\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"article\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    style: {\n      marginTop: '-30px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(ReactImageFallback, {\n    src: `${API}/blog/photo/${blog.slug}`,\n    alt: blog.title,\n    fallbackImage: \"/static/default.svg\",\n    className: \"img img-fluid featured-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))), __jsx(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \" pb-3 pt-3 text-center font-weight-bold\",\n    style: {\n      maxWidth: '100%',\n      overflow: 'hidden'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, blog.title), __jsx(\"p\", {\n    className: \"lead mt-3 mark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Written by\", __jsx(Link, {\n    href: `/profile/${blog.postedBy.username}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \" \", blog.postedBy.username, \" \")), \"| Published \", moment(blog.updatedAt).fromNow(), \"\\xA0 \", blog.likes.length, \" Likes\"), __jsx(\"div\", {\n    className: \"pb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, showBlogCategories(blog), showBlogTags(blog), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }))))), __jsx(\"div\", {\n    id: \"blog-body\",\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"col-md-12 lead\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, renderHTML(blog.body))), __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, __jsx(\"h4\", {\n    className: \"text-center pt-5 pb-5 h2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Related blogs\"), __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, showRelatedBlog())), __jsx(\"div\", {\n    className: \"container pt-5 pb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, showComments())))));\n};\n\nSingleBlog.getInitialProps = ({\n  query\n}) => {\n  return singleBlog(query.slug).then(data => {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n      return {\n        blog: data,\n        query\n      };\n    }\n  });\n};\n\nexport default SingleBlog;","map":{"version":3,"sources":["/Users/huirenchuah/Desktop/travelblog/frontend/pages/blogs/[slug].js"],"names":["Layout","Link","Head","useState","useEffect","singleBlog","listRelated","API","DOMAIN","APP_NAME","moment","renderHTML","SmallBlogCard","Search","DisqusThread","ReactImageFallback","SingleBlog","blog","query","related","setRelated","loadRelated","then","data","error","console","log","head","title","mdesc","slug","showBlogCategories","categories","map","c","i","name","showBlogTags","tags","t","showRelatedBlog","showComments","id","marginTop","maxWidth","overflow","postedBy","username","updatedAt","fromNow","likes","length","body","getInitialProps"],"mappings":"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","sourcesContent":["import Layout from \"../../components/Layout\";\nimport Link from \"next/link\";\nimport Head from \"next/head\";\nimport { useState, useEffect } from \"react\";\nimport { singleBlog, listRelated } from \"../../actions/blog\";\nimport { API, DOMAIN, APP_NAME } from \"../../config\";\nimport moment from \"moment\";\nimport renderHTML from \"react-render-html\";\nimport SmallBlogCard from '../../components/blog/SmallBlogCard'\nimport Search from \"../../components/blog/Search\"\nimport DisqusThread from '../../components/DisqusThread'\nimport ReactImageFallback from 'react-image-fallback'\n\n\nconst SingleBlog = ({ blog, query }) => {\n  const [related, setRelated] = useState([]);\n\n  const loadRelated = () => {\n      listRelated({ blog }).then(data => {\n          if (data.error) {\n              console.log(data.error);\n          } else {\n              setRelated(data);\n          }\n      });\n  };\n\n  useEffect(() => {\n      loadRelated();\n  }, []);\n\n  const head = () => (\n      <Head>\n          <title>\n              {blog.title} | {APP_NAME}\n          </title>\n          <meta name=\"description\" content={blog.mdesc} />\n          <link rel=\"canonical\" href={`${DOMAIN}/blogs/${query.slug}`} />\n          <meta property=\"og:title\" content={`${blog.title}| ${APP_NAME}`} />\n          <meta property=\"og:description\" content={blog.mdesc} />\n          <meta property=\"og:type\" content=\"webiste\" />\n          <meta property=\"og:url\" content={`${DOMAIN}/blogs/${query.slug}`} />\n          <meta property=\"og:site_name\" content={`${APP_NAME}`} />\n\n          <meta property=\"og:image\" content={`${API}/blog/photo/${blog.slug}`} />\n          <meta property=\"og:image:secure_url\" ccontent={`${API}/blog/photo/${blog.slug}`} />\n       \n      </Head>\n  );\n\n  const showBlogCategories = blog =>\n      blog.categories.map((c, i) => (\n          <Link key={i} href={`/categories/${c.slug}`}>\n              <a className=\"btn btn-primary mr-1 ml-1 mt-3\">{c.name}</a>\n          </Link>\n      ));\n\n  const showBlogTags = blog =>\n      blog.tags.map((t, i) => (\n          <Link key={i} href={`/tags/${t.slug}`}>\n              <a className=\"btn btn-outline-primary mr-1 ml-1 mt-3\">{t.name}</a>\n          </Link>\n      ));\n\n  const showRelatedBlog = () => {\n      return related.map((blog, i) => (\n          <div className=\"col-md-4\" key={i}>\n              <article>\n                  <SmallBlogCard blog={blog} />\n              </article>\n          </div>\n      ));\n  };\n\n  const showComments = () => {\n      return (\n          <div>\n              <DisqusThread id={blog.id} title={blog.title} path={`/blog/${blog.slug}`} />\n          </div>\n      );\n  };\n\n  return (\n      <React.Fragment>\n           \n          {head()}\n          <Layout>\n       \n              <main>\n                  <article>\n                      <div className=\"container-fluid\">\n                          <section>\n                              <div className=\"row\" style={{ marginTop: '-30px' }}>\n                                  <ReactImageFallback\n                                      src={`${API}/blog/photo/${blog.slug}`}\n                                      alt={blog.title}\n                                      fallbackImage=\"/static/default.svg\"\n                                      className=\"img img-fluid featured-image\"\n                                  />\n                              </div>\n                          </section>\n\n                          <section>\n                              <div className=\"container\">\n                                  <h1 className=\" pb-3 pt-3 text-center font-weight-bold\" style={{maxWidth:'100%', overflow:'hidden'}}>{blog.title}</h1>\n                                  <p className=\"lead mt-3 mark\">\n                                      Written by\n                                      <Link href={`/profile/${blog.postedBy.username}`}>\n                                          <a> {blog.postedBy.username} </a>\n                                      </Link>\n                                       | Published {moment(blog.updatedAt).fromNow()}\n                                       &nbsp; {blog.likes.length} Likes\n                                  </p>\n\n                                  <div className=\"pb-3\">\n                                      {showBlogCategories(blog)}\n                                      {showBlogTags(blog)}\n                                    \n                                      <br />\n                                      <br />\n                                  </div>\n                              </div>\n                          </section>\n                      </div>\n\n                      <div id=\"blog-body\" className=\"container\">\n                         \n                              <div className=\"col-md-12 lead\">{renderHTML(blog.body)}</div>\n                 \n                      </div>\n\n                      <div className=\"container\">\n                          <h4 className=\"text-center pt-5 pb-5 h2\">Related blogs</h4>\n                          <div className=\"row\">{showRelatedBlog()}</div>\n                      </div>\n\n                      <div className=\"container pt-5 pb-5\">{showComments()}</div>\n                  </article>\n              </main>\n          </Layout>\n      </React.Fragment>\n  );\n};\n\n\nSingleBlog.getInitialProps = ({ query }) => {\n  return singleBlog(query.slug).then(data => {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n\n      return { blog: data, query };\n    }\n  });\n};\n\nexport default SingleBlog;\n"]},"metadata":{},"sourceType":"module"}