{"ast":null,"code":"var _jsxFileName = \"/Users/huirenchuah/Desktop/travelblog/frontend/pages/blogs/[slug].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../../components/Layout\";\nimport Link from \"next/link\";\nimport Head from \"next/head\";\nimport { useState, useEffect } from \"react\";\nimport { singleBlog, listRelated, like, unlike } from \"../../actions/blog\";\nimport { API, DOMAIN, APP_NAME } from \"../../config\";\nimport moment from \"moment\";\nimport renderHTML from \"react-render-html\";\nimport SmallBlogCard from '../../components/blog/SmallBlogCard';\nimport Search from \"../../components/blog/Search\";\nimport DisqusThread from '../../components/DisqusThread';\nimport ReactImageFallback from 'react-image-fallback';\n\nvar SingleBlog = function SingleBlog(_ref) {\n  var blog = _ref.blog,\n      query = _ref.query,\n      likes = _ref.likes;\n\n  var _useState = useState([]),\n      related = _useState[0],\n      setRelated = _useState[1];\n\n  var _useState2 = useState({\n    likes: 0,\n    like: false\n  }),\n      userLike = _useState2[0],\n      setUserLike = _useState2[1];\n\n  var loadRelated = function loadRelated() {\n    listRelated({\n      blog: blog\n    }).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setRelated(data);\n      }\n    });\n  };\n\n  useEffect(function () {\n    loadRelated();\n  }, []);\n\n  var head = function head() {\n    return __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, blog.title, \" | \", APP_NAME), __jsx(\"meta\", {\n      name: \"description\",\n      content: blog.mdesc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }), __jsx(\"link\", {\n      rel: \"canonical\",\n      href: \"\".concat(DOMAIN, \"/blogs/\").concat(query.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"\".concat(blog.title, \"| \").concat(APP_NAME),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:description\",\n      content: blog.mdesc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"webiste\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:url\",\n      content: \"\".concat(DOMAIN, \"/blogs/\").concat(query.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: \"\".concat(APP_NAME),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:image\",\n      content: \"\".concat(API, \"/blog/photo/\").concat(blog.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }), __jsx(\"meta\", {\n      property: \"og:image:secure_url\",\n      ccontent: \"\".concat(API, \"/blog/photo/\").concat(blog.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }));\n  };\n\n  var showBlogCategories = function showBlogCategories(blog) {\n    return blog.categories.map(function (c, i) {\n      return __jsx(Link, {\n        key: i,\n        href: \"/categories/\".concat(c.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"btn btn-primary mr-1 ml-1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, c.name));\n    });\n  };\n\n  var showBlogTags = function showBlogTags(blog) {\n    return blog.tags.map(function (t, i) {\n      return __jsx(Link, {\n        key: i,\n        href: \"/tags/\".concat(t.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"btn btn-outline-primary mr-1 ml-1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, t.name));\n    });\n  };\n\n  var showRelatedBlog = function showRelatedBlog() {\n    return related.map(function (blog, i) {\n      return __jsx(\"div\", {\n        className: \"col-md-4\",\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, __jsx(\"article\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, __jsx(SmallBlogCard, {\n        blog: blog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })));\n    });\n  };\n\n  var showComments = function showComments() {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, __jsx(DisqusThread, {\n      id: blog.id,\n      title: blog.title,\n      path: \"/blog/\".concat(blog.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }));\n  };\n\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, head(), __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(\"main\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, __jsx(\"article\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    style: {\n      marginTop: '-30px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, __jsx(ReactImageFallback, {\n    src: \"\".concat(API, \"/blog/photo/\").concat(blog.slug),\n    alt: blog.title,\n    fallbackImage: \"/static/default.svg\",\n    className: \"img img-fluid featured-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }))), __jsx(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \" pb-3 pt-3 text-center font-weight-bold\",\n    style: {\n      maxWidth: '100%',\n      overflow: 'hidden'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, blog.title), __jsx(\"p\", {\n    className: \"lead mt-3 mark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Written by\", __jsx(Link, {\n    href: \"/profile/\".concat(blog.postedBy.username),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \" \", blog.postedBy.username, \" \")), \"| Published \", moment(blog.updatedAt).fromNow()), __jsx(\"div\", {\n    className: \"pb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, showBlogCategories(blog), showBlogTags(blog), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }))))), __jsx(\"div\", {\n    id: \"blog-body\",\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, userLike, \" Like\"), __jsx(\"div\", {\n    className: \"col-md-12 lead\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, renderHTML(blog.body))), __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, __jsx(\"h4\", {\n    className: \"text-center pt-5 pb-5 h2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"Related blogs\"), __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, showRelatedBlog())), __jsx(\"div\", {\n    className: \"container pt-5 pb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, showComments())))));\n};\n\nSingleBlog.getInitialProps = function (_ref2) {\n  var query = _ref2.query;\n  return singleBlog(query.slug).then(function (data) {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n      return {\n        blog: data,\n        query: query,\n        likes: data.likes.length\n      };\n    }\n  });\n};\n\nexport default SingleBlog;","map":{"version":3,"sources":["/Users/huirenchuah/Desktop/travelblog/frontend/pages/blogs/[slug].js"],"names":["Layout","Link","Head","useState","useEffect","singleBlog","listRelated","like","unlike","API","DOMAIN","APP_NAME","moment","renderHTML","SmallBlogCard","Search","DisqusThread","ReactImageFallback","SingleBlog","blog","query","likes","related","setRelated","userLike","setUserLike","loadRelated","then","data","error","console","log","head","title","mdesc","slug","showBlogCategories","categories","map","c","i","name","showBlogTags","tags","t","showRelatedBlog","showComments","id","marginTop","maxWidth","overflow","postedBy","username","updatedAt","fromNow","body","getInitialProps","length"],"mappings":"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","sourcesContent":["import Layout from \"../../components/Layout\";\nimport Link from \"next/link\";\nimport Head from \"next/head\";\nimport { useState, useEffect } from \"react\";\nimport { singleBlog, listRelated, like, unlike } from \"../../actions/blog\";\nimport { API, DOMAIN, APP_NAME } from \"../../config\";\nimport moment from \"moment\";\nimport renderHTML from \"react-render-html\";\nimport SmallBlogCard from '../../components/blog/SmallBlogCard'\nimport Search from \"../../components/blog/Search\"\nimport DisqusThread from '../../components/DisqusThread'\nimport ReactImageFallback from 'react-image-fallback'\n\n\nconst SingleBlog = ({ blog, query, likes }) => {\n  const [related, setRelated] = useState([]);\nconst [userLike, setUserLike] =useState({likes:0, like:false})\n\n  const loadRelated = () => {\n      listRelated({ blog }).then(data => {\n          if (data.error) {\n              console.log(data.error);\n          } else {\n              setRelated(data);\n          }\n      });\n  };\n\n  useEffect(() => {\n      loadRelated();\n  }, []);\n\n  const head = () => (\n      <Head>\n          <title>\n              {blog.title} | {APP_NAME}\n          </title>\n          <meta name=\"description\" content={blog.mdesc} />\n          <link rel=\"canonical\" href={`${DOMAIN}/blogs/${query.slug}`} />\n          <meta property=\"og:title\" content={`${blog.title}| ${APP_NAME}`} />\n          <meta property=\"og:description\" content={blog.mdesc} />\n          <meta property=\"og:type\" content=\"webiste\" />\n          <meta property=\"og:url\" content={`${DOMAIN}/blogs/${query.slug}`} />\n          <meta property=\"og:site_name\" content={`${APP_NAME}`} />\n\n          <meta property=\"og:image\" content={`${API}/blog/photo/${blog.slug}`} />\n          <meta property=\"og:image:secure_url\" ccontent={`${API}/blog/photo/${blog.slug}`} />\n       \n      </Head>\n  );\n\n  const showBlogCategories = blog =>\n      blog.categories.map((c, i) => (\n          <Link key={i} href={`/categories/${c.slug}`}>\n              <a className=\"btn btn-primary mr-1 ml-1 mt-3\">{c.name}</a>\n          </Link>\n      ));\n\n  const showBlogTags = blog =>\n      blog.tags.map((t, i) => (\n          <Link key={i} href={`/tags/${t.slug}`}>\n              <a className=\"btn btn-outline-primary mr-1 ml-1 mt-3\">{t.name}</a>\n          </Link>\n      ));\n\n  const showRelatedBlog = () => {\n      return related.map((blog, i) => (\n          <div className=\"col-md-4\" key={i}>\n              <article>\n                  <SmallBlogCard blog={blog} />\n              </article>\n          </div>\n      ));\n  };\n\n  const showComments = () => {\n      return (\n          <div>\n              <DisqusThread id={blog.id} title={blog.title} path={`/blog/${blog.slug}`} />\n          </div>\n      );\n  };\n\n  return (\n      <React.Fragment>\n           \n          {head()}\n          <Layout>\n       \n              <main>\n                  <article>\n                      <div className=\"container-fluid\">\n                          <section>\n                              <div className=\"row\" style={{ marginTop: '-30px' }}>\n                                  <ReactImageFallback\n                                      src={`${API}/blog/photo/${blog.slug}`}\n                                      alt={blog.title}\n                                      fallbackImage=\"/static/default.svg\"\n                                      className=\"img img-fluid featured-image\"\n                                  />\n                              </div>\n                          </section>\n\n                          <section>\n                              <div className=\"container\">\n                                  <h1 className=\" pb-3 pt-3 text-center font-weight-bold\" style={{maxWidth:'100%', overflow:'hidden'}}>{blog.title}</h1>\n                                  <p className=\"lead mt-3 mark\">\n                                      Written by\n                                      <Link href={`/profile/${blog.postedBy.username}`}>\n                                          <a> {blog.postedBy.username} </a>\n                                      </Link>\n                                       | Published {moment(blog.updatedAt).fromNow()}\n                                   \n                                  </p>\n\n                                  <div className=\"pb-3\">\n                                      {showBlogCategories(blog)}\n                                      {showBlogTags(blog)}\n                                    \n                                      <br />\n                                      <br />\n                                  </div>\n                              </div>\n                          </section>\n                      </div>\n                   \n                      <div id=\"blog-body\" className=\"container\">\n                      <h3>{userLike} Like</h3> \n                              <div className=\"col-md-12 lead\">{renderHTML(blog.body)}</div>\n                 \n                      </div>\n\n                      <div className=\"container\">\n                          <h4 className=\"text-center pt-5 pb-5 h2\">Related blogs</h4>\n                          <div className=\"row\">{showRelatedBlog()}</div>\n                      </div>\n\n                      <div className=\"container pt-5 pb-5\">{showComments()}</div>\n                  </article>\n              </main>\n          </Layout>\n      </React.Fragment>\n  );\n};\n\n\nSingleBlog.getInitialProps = ({ query }) => {\n  return singleBlog(query.slug).then(data => {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n\n      return { blog: data, query, likes:data.likes.length };\n    }\n  });\n};\n\nexport default SingleBlog;\n"]},"metadata":{},"sourceType":"module"}